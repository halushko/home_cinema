version: '3.7'

x-common-variables: &common-variables
  extends:
    file: constants.yml
    service: common-variables
services:
  torrent:
    image: halushko/cinema-torrent:alpha
    environment: *common-variables
    restart: always
    container_name: "torrent"
    volumes:
      - ./workdir/config/transmission:/home/app/transmission_config
      - ./workdir/config/transmission_hdd:/home/app/transmission_config_hdd
      - ./workdir/config/logs:/home/app/logs
    network_mode: host
  bot:
    image: halushko/cinema-bot:alpha
    environment: *common-variables
    restart: always
    container_name: "bot"
    volumes:
      - ./workdir/config/logs:/home/app/logs
    networks:
      bot_network_local:
  text:
    image: halushko/cinema-text:alpha
    environment: *common-variables
    restart: always
    container_name: "text"
    volumes:
      - ./workdir/config/logs:/home/app/logs
    networks:
      bot_network_local:
  file:
    image: halushko/cinema-file:alpha
    environment: *common-variables
    restart: always
    container_name: "file"
    volumes:
      - ./workdir/config/files_from_telegram:/home/torrent_files/
      - ./workdir/config/files_from_telegram_hdd:/home/torrent_files_hdd/
      - ./workdir/config/logs:/home/app/logs
    networks:
      bot_network_local:
networks:
  bot_network_local:
    driver: bridge
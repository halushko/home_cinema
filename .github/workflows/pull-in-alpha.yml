name: Pull in alpha

on:
  pull_request:
    branches: [ alpha ]
  push:
    branches: [ alpha ]

env:
  SERVICE_MATRIX: 'bot,text,file,torrent'

jobs:
  build_core:
    extends:
      file: jobs/build_core.yaml
      job: execute_job
  build_jars:
    extends:
      file: jobs/build_jars.yaml
      job: execute_job
    needs: build_core
  get_tags:
    extends:
      file: jobs/getters/alpha_tags.yml
      job: execute_job
    needs: build_jars
  push_images:
    extends:
      file: jobs/push_images.yml
      job: execute_job
    needs: get_tags
  login_to_docker:
    extends:
      file: jobs/getters/docker_token.yaml
      job: execute_job
    needs: push_images
  clean_beta_images:
    extends:
      file: jobs/clean_beta_images.yaml
      job: execute_job
    needs: login_to_docker